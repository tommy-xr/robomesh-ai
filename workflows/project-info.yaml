version: 2
metadata:
  name: Project Info
  description: Gathers information about the current project
nodes:
  - id: trigger_1
    type: trigger
    position:
      x: 100
      "y": 150
    data:
      label: Start
      nodeType: trigger
      triggerType: manual
      outputs:
        - name: timestamp
          type: string
        - name: type
          type: string
        - name: text
          type: string
        - name: params
          type: json
  - id: shell_branch
    type: shell
    position:
      x: 300
      "y": 50
    data:
      label: Get Branch
      nodeType: shell
      commands:
        - git branch --show-current
      inputs:
        - name: input
          type: any
          required: false
          description: Generic input for template interpolation
      outputs:
        - name: output
          type: string
          description: Combined stdout output
        - name: stdout
          type: string
          description: Standard output
        - name: stderr
          type: string
          description: Standard error
        - name: exitCode
          type: number
          description: Exit code (0 = success)
  - id: shell_commit
    type: shell
    position:
      x: 300
      "y": 150
    data:
      label: Get Commit
      nodeType: shell
      commands:
        - git rev-parse --short HEAD
      inputs:
        - name: input
          type: any
          required: false
          description: Generic input for template interpolation
      outputs:
        - name: output
          type: string
          description: Combined stdout output
        - name: stdout
          type: string
          description: Standard output
        - name: stderr
          type: string
          description: Standard error
        - name: exitCode
          type: number
          description: Exit code (0 = success)
  - id: shell_files
    type: shell
    position:
      x: 300
      "y": 250
    data:
      label: Count Files
      nodeType: shell
      commands:
        - find . -name "*.ts" -o -name "*.tsx" | wc -l | tr -d ' '
      inputs:
        - name: input
          type: any
          required: false
          description: Generic input for template interpolation
      outputs:
        - name: output
          type: string
          description: Combined stdout output
        - name: stdout
          type: string
          description: Standard output
        - name: stderr
          type: string
          description: Standard error
        - name: exitCode
          type: number
          description: Exit code (0 = success)
  - id: shell_summary
    type: shell
    position:
      x: 550
      "y": 150
    data:
      label: Print Summary
      nodeType: shell
      inputs:
        - name: branch
          type: string
        - name: commit
          type: string
        - name: files
          type: string
        - name: input
          type: any
          required: false
          description: Generic input for template interpolation
      commands:
        - echo '=== Project Summary ==='
        - "echo 'Branch: {{ inputs.branch }}'"
        - "echo 'Commit: {{ inputs.commit }}'"
        - "echo 'TypeScript files: {{ inputs.files }}'"
        - echo '======================='
      outputs:
        - name: output
          type: string
          description: Combined stdout output
        - name: stdout
          type: string
          description: Standard output
        - name: stderr
          type: string
          description: Standard error
        - name: exitCode
          type: number
          description: Exit code (0 = success)
edges:
  - id: e1
    source: trigger_1
    target: shell_branch
    sourceHandle: output:text
    targetHandle: input:input
  - id: e2
    source: trigger_1
    target: shell_commit
    sourceHandle: output:text
    targetHandle: input:input
  - id: e3
    source: trigger_1
    target: shell_files
    sourceHandle: output:text
    targetHandle: input:input
  - id: e4
    source: shell_branch
    target: shell_summary
    sourceHandle: output:stdout
    targetHandle: input:branch
  - id: e5
    source: shell_commit
    target: shell_summary
    sourceHandle: output:stdout
    targetHandle: input:commit
  - id: e6
    source: shell_files
    target: shell_summary
    sourceHandle: output:stdout
    targetHandle: input:files
