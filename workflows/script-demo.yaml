version: 2
metadata:
  name: Script Node Demo
  description: Demonstrates the script node with TypeScript, JavaScript, and Bash
nodes:
  - id: trigger_1
    type: trigger
    position:
      x: 100
      "y": 200
    data:
      label: Start
      nodeType: trigger
      triggerType: manual
      outputs:
        - name: timestamp
          type: string
        - name: type
          type: string
        - name: text
          type: string
        - name: params
          type: json
  - id: ts_script
    type: script
    position:
      x: 350
      "y": 100
    data:
      label: TypeScript Hello
      nodeType: script
      scriptFile: workflows/scripts/hello.ts
      scriptArgs: TypeScript
      inputs:
        - name: input
          type: any
          required: false
          description: Generic input for template interpolation
      outputs:
        - name: output
          type: string
          description: Script output
        - name: stdout
          type: string
          description: Standard output
        - name: stderr
          type: string
          description: Standard error
        - name: exitCode
          type: number
          description: Exit code (0 = success)
  - id: js_script
    type: script
    position:
      x: 350
      "y": 200
    data:
      label: JavaScript Hello
      nodeType: script
      scriptFile: workflows/scripts/hello.js
      scriptArgs: JavaScript
      inputs:
        - name: input
          type: any
          required: false
          description: Generic input for template interpolation
      outputs:
        - name: output
          type: string
          description: Script output
        - name: stdout
          type: string
          description: Standard output
        - name: stderr
          type: string
          description: Standard error
        - name: exitCode
          type: number
          description: Exit code (0 = success)
  - id: sh_script
    type: script
    position:
      x: 350
      "y": 300
    data:
      label: Bash Hello
      nodeType: script
      scriptFile: workflows/scripts/hello.sh
      scriptArgs: Bash
      inputs:
        - name: input
          type: any
          required: false
          description: Generic input for template interpolation
      outputs:
        - name: output
          type: string
          description: Script output
        - name: stdout
          type: string
          description: Standard output
        - name: stderr
          type: string
          description: Standard error
        - name: exitCode
          type: number
          description: Exit code (0 = success)
  - id: combine_results
    type: shell
    position:
      x: 600
      "y": 200
    data:
      label: Show Results
      nodeType: shell
      script: |
        echo "=== Script Outputs ==="
        echo ""
        echo "TypeScript:"
        echo "{{ ts_script.output }}"
        echo ""
        echo "JavaScript:"
        echo "{{ js_script.output }}"
        echo ""
        echo "Bash:"
        echo "{{ sh_script.output }}"
      inputs:
        - name: input
          type: any
          required: false
          description: Generic input for template interpolation
      outputs:
        - name: output
          type: string
          description: Combined stdout output
        - name: stdout
          type: string
          description: Standard output
        - name: stderr
          type: string
          description: Standard error
        - name: exitCode
          type: number
          description: Exit code (0 = success)
edges:
  - id: e1
    source: trigger_1
    target: ts_script
  - id: e2
    source: trigger_1
    target: js_script
  - id: e3
    source: trigger_1
    target: sh_script
  - id: e4
    source: ts_script
    target: combine_results
  - id: e5
    source: js_script
    target: combine_results
  - id: e6
    source: sh_script
    target: combine_results
